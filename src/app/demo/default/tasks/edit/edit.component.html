<!--<app-card [cardTitle]="'Edit Task'">-->
<!--  <form [formGroup]="editTaskForm" (ngSubmit)="onSubmit()">-->
<!--    <div class="card">-->
<!--      <div class="card-body" style="padding: 20px;">-->
<!--        <div class="row">-->
<!--          &lt;!&ndash; Title &ndash;&gt;-->
<!--          <div class="col-sm-6">-->
<!--            <div class="form-group">-->
<!--              <label class="form-label">Title</label>-->
<!--              <input-->
<!--                class="form-control"-->
<!--                type="text"-->
<!--                formControlName="name"-->
<!--                placeholder="Enter task title"-->
<!--              />-->
<!--              @if(editTaskForm.get('name')?.invalid && editTaskForm.get('name')?.touched){-->
<!--                <div class="text-danger">-->
<!--                  Name is required.-->
<!--                </div>-->
<!--              }-->
<!--            </div>-->
<!--          </div>-->

<!--          &lt;!&ndash; Status &ndash;&gt;-->
<!--          <div class="col-sm-6">-->
<!--            <div class="form-group">-->
<!--              <label class="form-label">Status</label>-->
<!--              <select class="form-select" formControlName="status">-->
<!--                <option value="Pending">Pending</option>-->
<!--                <option value="In Progress">In Progress</option>-->
<!--                <option value="Completed">Completed</option>-->
<!--              </select>-->
<!--              @if(editTaskForm.get('status')?.invalid && editTaskForm.get('status')?.touched){-->
<!--                <div class="text-danger">-->
<!--                  Status is required.-->
<!--                </div>-->
<!--              }-->
<!--            </div>-->
<!--          </div>-->

<!--          &lt;!&ndash; Description &ndash;&gt;-->
<!--          <div class="col-12">-->
<!--            <div class="form-group">-->
<!--              <label class="form-label">Description</label>-->
<!--              <textarea-->
<!--                class="form-control"-->
<!--                rows="4"-->
<!--                formControlName="description"-->
<!--                placeholder="Enter task description"-->
<!--              ></textarea>-->
<!--              @if(editTaskForm.get('description')?.invalid && editTaskForm.get('description')?.touched){-->
<!--                <div class="text-danger">-->
<!--                  Description is required.-->
<!--                </div>-->
<!--              }-->
<!--            </div>-->
<!--          </div>-->


<!--          &lt;!&ndash; Due Date &ndash;&gt;-->
<!--          <div class="col-sm-6">-->
<!--            <div class="form-group">-->
<!--              <label class="form-label">Due Date</label>-->
<!--              <div class="input-group">-->
<!--                <input-->
<!--                  class="form-control"-->
<!--                  formControlName="dueDate"-->
<!--                  ngbDatepicker-->
<!--                  #dueDate="ngbDatepicker"-->
<!--                  placeholder="Select due date"-->
<!--                />-->
<!--                <button class="btn btn-outline-secondary" type="button" (click)="dueDate.toggle()">-->
<!--                  <i antIcon type="calendar" theme="outline"></i>-->
<!--                </button>-->
<!--              </div>-->
<!--              @if(editTaskForm.get('dueDate')?.invalid && editTaskForm.get('dueDate')?.touched){-->
<!--                <div class="text-danger">-->
<!--                  Due Date is required.-->
<!--                </div>-->
<!--              }-->
<!--            </div>-->
<!--          </div>-->

<!--          &lt;!&ndash; Project &ndash;&gt;-->
<!--          <div class="col-sm-6">-->
<!--            <div class="form-group">-->
<!--              <label class="form-label">Project</label>-->
<!--              <select class="form-select" formControlName="project">-->
<!--                @for (project of projectOptions; track project) {-->
<!--                  <option class="dropdown-item" [value]="project.projectName">-->
<!--                    {{ project.projectName }}-->
<!--                  </option>-->
<!--                }-->
<!--              </select>-->
<!--              @if(editTaskForm.get('project')?.invalid && editTaskForm.get('project')?.touched){-->
<!--                <div class="text-danger">-->
<!--                  Project selection is required.-->
<!--                </div>-->
<!--              }-->
<!--            </div>-->
<!--          </div>-->
<!--          <div class="col-sm-12">-->
<!--            <div class="form-group mb-3">-->
<!--              <label for="priority" class="form-label">Priority</label>-->
<!--              <select-->
<!--                class="form-select"-->
<!--                id="priority"-->
<!--                formControlName="priority"-->
<!--              >-->
<!--                @for (priority of priorityOptions; track priority) {-->
<!--                  <option [value]="priority">{{ priority }}</option>-->
<!--                }-->
<!--              </select>-->
<!--              @if (editTaskForm.get('priority')?.invalid && editTaskForm.get('priority')?.touched) {-->
<!--                <div class="text-danger">Priority is required.</div>-->
<!--              }-->
<!--            </div>-->
<!--          </div>-->

<!--          &lt;!&ndash; Document/Image &ndash;&gt;-->
<!--          <div class="form-group">-->
<!--            <label for="document" class="form-label">Document/Image</label>-->
<!--            <input-->
<!--              type="file"-->
<!--              id="document"-->
<!--              class="form-control"-->
<!--              (change)="onFileSelected($event)"-->
<!--              multiple-->
<!--            />-->

<!--            &lt;!&ndash; Display existing files &ndash;&gt;-->
<!--            <h6 class="mt-3">Existing Files:</h6>-->
<!--            <ul class="list-group">-->
<!--              <li-->
<!--                class="list-group-item d-flex justify-content-between align-items-center"-->
<!--                *ngFor="let file of backendFiles; let i = index"-->
<!--              >-->
<!--                <a (click)="previewFile(file)" class="file-link">{{ getFileName(file) }}</a>-->
<!--                <button type="button" class="btn btn-sm btn-danger" (click)="removeBackendFile(i)">-->
<!--                  Remove-->
<!--                </button>-->
<!--              </li>-->
<!--            </ul>-->

<!--            &lt;!&ndash; Display uploaded files &ndash;&gt;-->
<!--            <h6 class="mt-3">Uploaded Files:</h6>-->
<!--            <ul class="list-group">-->
<!--              <li-->
<!--                class="list-group-item d-flex justify-content-between align-items-center"-->
<!--                *ngFor="let file of uploadedFiles; let i = index"-->
<!--              >-->
<!--                <span>{{ file.name }}</span>-->
<!--                <button type="button" class="btn btn-sm btn-danger" (click)="removeUploadedFile(i)">-->
<!--                  Remove-->
<!--                </button>-->
<!--              </li>-->
<!--            </ul>-->
<!--          </div>-->
<!--        </div>-->
<!--      </div>-->

<!--      &lt;!&ndash; Footer Buttons &ndash;&gt;-->
<!--      <div class="card-footer text-end btn-page">-->
<!--        <button type="button" class="btn btn-danger">-->
<!--          Delete-->
<!--        </button>-->
<!--        <button type="submit" class="btn btn-primary" [disabled]="editTaskForm.invalid">-->
<!--          Update-->
<!--        </button>-->

<!--      </div>-->
<!--    </div>-->
<!--  </form>-->
<!--</app-card>-->
<app-card cardTitle="Edit Task">
  <form [formGroup]="editTaskForm" (ngSubmit)="onSubmit()">
    <div class="card">
      <div class="card-body" style="padding: 20px;">
        <div class="row">
          <!-- Title -->
          <div class="col-sm-6">
            <div class="form-group">
              <label class="form-label">Title</label>
              <input
                class="form-control"
                type="text"
                formControlName="name"
                placeholder="Enter task title"
              />
              @if (editTaskForm.get('name')?.invalid && editTaskForm.get('name')?.touched) {
                <div class="text-danger">
                  Title is required.
                </div>
              }
            </div>
          </div>

          <!-- Status -->
          <div class="col-sm-6">
            <div class="form-group">
              <label class="form-label">Status</label>
              <select class="form-select" formControlName="status">
                <option value="Pending">Pending</option>
                <option value="In Progress">In Progress</option>
                <option value="Completed">Completed</option>
              </select>
              @if (editTaskForm.get('status')?.invalid && editTaskForm.get('status')?.touched) {
                <div class="text-danger">
                  Status is required.
                </div>
              }
            </div>
          </div>

          <!-- Description -->
          <div class="col-12">
            <div class="form-group">
              <label class="form-label">Description</label>
              <textarea
                class="form-control"
                rows="4"
                formControlName="description"
                placeholder="Enter task description"
              ></textarea>
              @if (editTaskForm.get('description')?.invalid && editTaskForm.get('description')?.touched) {
                <div class="text-danger">
                  Description is required.
                </div>
              }
            </div>
          </div>


          <!-- Due Date -->
          <div class="col-sm-6">
            <div class="form-group">
              <label class="form-label">Due Date</label>
              <div class="input-group">
                <input
                  class="form-control"
                  formControlName="dueDate"
                  ngbDatepicker
                  #dueDate="ngbDatepicker"
                  placeholder="Select due date"
                />
                <button class="btn btn-outline-secondary" type="button" (click)="dueDate.toggle()">
                  <i antIcon type="calendar" theme="outline"></i>
                </button>
              </div>
              @if (editTaskForm.get('dueDate')?.invalid && editTaskForm.get('dueDate')?.touched) {
                <div class="text-danger">
                  Due Date is required.
                </div>
              }
            </div>
          </div>

          <!-- Project -->
          <div class="col-sm-6">
            <div class="form-group">
              <label class="form-label">Project</label>
              <select class="form-select" formControlName="project">
                @for (project of projectOptions; track project) {
                  <option class="dropdown-item" [value]="project._id">
                    {{ project.name }}
                  </option>
                }
              </select>
              @if (editTaskForm.get('project')?.invalid && editTaskForm.get('project')?.touched) {
                <div class="text-danger">
                  Project selection is required.
                </div>
              }
            </div>
          </div>

          <div class="col-sm-6">
            <div class="form-group mb-3">
              <label for="priority" class="form-label">Priority</label>
              <select
                class="form-select"
                id="priority"
                formControlName="priority"
              >
                @for (priority of priorityOptions; track priority) {
                  <option [value]="priority">{{ priority }}</option>
                }
              </select>
              @if (editTaskForm.get('priority')?.invalid && editTaskForm.get('priority')?.touched) {
                <div class="text-danger">Priority is required.</div>
              }
            </div>
          </div>

          <div class="col-sm-6">
            <div class="form-group">
              <label class="form-label">Complete At</label>
              <div class="input-group">
                <input
                  class="form-control"
                  formControlName="completedAt"
                  ngbDatepicker
                  #completedAt="ngbDatepicker"
                  placeholder="Select complete date"
                />
                <button class="btn btn-outline-secondary" type="button" (click)="completedAt.toggle()">
                  <i antIcon type="calendar" theme="outline"></i>
                </button>
              </div>
            </div>
          </div>
          <!-- Document/Image -->
          <div class="col-12">
            <div class="form-group">
              <label class="form-label">Document/Image</label>
              <input
                type="file"
                class="form-control"
                (change)="handleFileUpload($event)"
              />
              @if (editTaskForm.get('document')?.invalid && editTaskForm.get('document')?.touched) {
                <div class="text-danger">
                  Document/Image is required.
                </div>
              }
              <h6 class="mt-3">Existing Files:</h6>
              <ul class="list-group">
                <li
                  class="list-group-item d-flex justify-content-between align-items-center"
                  *ngFor="let file of backendFiles; let i = index"
                >
                  <a (click)="previewFile(file)" class="file-link">{{ getFileName(file) }}</a>
                  <button type="button" class="btn btn-sm btn-danger" (click)="removeBackendFile(file,i)">
                    Remove
                  </button>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <!-- Footer Buttons -->
      <div class="card-footer text-end btn-page">
        <button type="button" class="btn btn-danger" (click)="open(deleteModal);">
          Delete
        </button>
        <button type="submit" class="btn btn-primary" [disabled]="editTaskForm.invalid">
          Update
        </button>
      </div>
    </div>
  </form>
</app-card>


<!-- Modal Content -->
<ng-template #deleteModal let-modal>
  <div class="modal-header">
    <h4 class="modal-title">Confirm Deletion</h4>
    <button type="button" class="btn-close" (click)="modal.dismiss()"></button>
  </div>
  <div class="modal-body">
    <p>Are you sure you want to delete this item?</p>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="modal.dismiss()">Cancel</button>
    <button type="button" class="btn btn-danger" (click)="deleteItem(); modal.close()">Delete</button>
  </div>
</ng-template>
